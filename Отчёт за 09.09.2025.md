# Отчёт по практике за 09.09.2025. 
# Изучении FastAPI и Vue.js

Файл - Work-1

## Общее описание проекта
Создано полноценное веб-приложение с backend на **FastAPI** и frontend на **Vue.js**. Приложение включает:
- Систему регистрации и авторизации пользователей
- Создание постов пользователями
- Работу с базой данных SQLite через SQLAlchemy
- REST API с валидацией данных

## Структура проекта
```
project/
├── main.py          # Основное FastAPI приложение
├── models.py        # Модели базы данных
├── schemas.py       # Pydantic схемы для валидации
├── database.py      # Настройка подключения к БД
└── public/
    ├── App.vue      # Главный компонент Vue
    └── AuthComponent.vue  # Компонент авторизации
```

## Backend (FastAPI)

### database.py - Настройка базы данных
```python
SQL_DB_URL = 'sqlite:///./itproger.db'
engine = create_engine(SQL_DB_URL, connect_args={'check_same_thread': False})
```
*Создание подключения к SQLite базе данных с названием "itproger.db"*

### models.py - Модели данных
```python
class User(Base):
    __tablename__ = "users"
    id = Column(Integer, primary_key=True, index=True)
    name = Column(String, index=True)
    age = Column(Integer)
```
*Определение таблицы пользователей с полями: ID (автоинкремент), имя и возраст*

```python
author = relationship("User")
```
*Создание связи между постами и пользователями - каждый пост принадлежит одному пользователю*

### schemas.py - Валидация данных
```python
class UserCreate(UserBase):
    pass
```
*Pydantic модель для валидации данных при создании пользователя*

```python
class Config:
    orm_mode = True
```
*Включение режима работы с ORM объектами (автоматическое преобразование из моделей SQLAlchemy)*

### main.py - Основное приложение

#### CORS настройка:
```python
app.add_middleware(CORSMiddleware, allow_origins=origins, ...)
```
*Разрешение frontend приложению на разных портах обращаться к backend API*

#### Зависимость базы данных:
```python
def get_db():
    db = session_local()
    try:
        yield db
    finally:
        db.close()
```
*Создание и закрытие соединения с БД для каждого запроса*

#### Создание пользователя:
```python
@app.post("/users/", response_model=DbUser)
async def create_user(user: UserCreate, db: Session = Depends(get_db)) -> DbUser:
```
*POST endpoint для создания пользователя с валидацией данных и автоматическим подключением к БД*

#### Обработка ошибок:
```python
raise HTTPException(status_code=404, detail="User not found")
```
*Возврат понятной ошибки если пользователь не найден*

## Frontend (Vue.js)

### AuthComponent.vue - Компонент авторизации

#### Двустороннее связывание данных:
```vue
<input type="text" id="registerName" v-model="registerName">
```
*Связывает значение input с переменной registerName в компоненте*

#### Обработка формы:
```vue
<form @submit.prevent="register">
```
*Предотвращает стандартную отправку формы и вызывает метод register*

#### HTTP запросы:
```javascript
const response = await axios.post('http://127.0.0.1:8000/users/', {...})
```
*Отправка POST запроса на создание пользователя*

#### Передача событий:
```javascript
this.$emit('handleAuth');
```
*Отправка события родительскому компоненту об успешной авторизации*

### App.vue - Главный компонент

#### Условный рендеринг:
```vue
<auth-component v-if="!isAuth" @handleAuth="handleAuth" />
<div v-else>Вы авторизованы</div>
```
*Показывает компонент авторизации если пользователь не авторизован, иначе показывает сообщение*

## Ключевые концепции, которые были освоены

1. **REST API design** - создание эндпоинтов для CRUD операций
2. **ORM работа** - использование SQLAlchemy для работы с БД
3. **Валидация данных** - Pydantic модели для проверки входящих данных
4. **Зависимости** - система Dependency Injection в FastAPI
5. **CORS** - настройка межсайтовых запросов
6. **Vue.js основы** - компоненты, данные, методы, события
7. **HTTP клиент** - работа с axios для API запросов
8. **Состояние приложения** - управление авторизацией через Vue

## Полный flow приложения

1. **Регистрация**: Пользователь вводит данные → данные валидируются → сохраняются в БД
2. **Авторизация**: Пользователь вводит имя → проверка в БД → изменение состояния в Vue
3. **Создание постов**: (В будущем) Создание постов с привязкой к автору

## Эндпоинты API

| Метод | Путь | Описание |
|-------|------|----------|
| POST | `/users/` | Создание нового пользователя |
| GET | `/users/{name}` | Получение пользователя по имени |
| POST | `/posts/` | Создание нового поста |
| GET | `/posts/` | Получение всех постов |

## Технологический стек

- **Backend**: FastAPI, SQLAlchemy, Pydantic, SQLite
- **Frontend**: Vue.js, Axios
- **Инструменты**: async/await, CORS, ORM

### Сслыки

- [FastAPI с нуля](https://www.youtube.com/watch?v=RUddtw-oqFU&list=PL0lO_mIqDDFXDGav-t4qzQYdX6cfoLxXr&index=1)